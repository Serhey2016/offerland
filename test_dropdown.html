<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Dropdown Menu</title>
    <link rel="stylesheet" href="static/css/advertising_feed.css">
    <style>
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
        }
        .test-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-info">
            <h2>Test Dropdown Menu</h2>
            <p>This is a test page to verify that the dropdown menu is working correctly.</p>
            <p>Click on the three dots menu button to open/close the dropdown.</p>
            
            <div style="margin-top: 20px;">
                <button onclick="testDropdown123()" style="margin-right: 10px; padding: 10px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
                    Test Post 123
                </button>
                <button onclick="testDropdown456()" style="margin-right: 10px; padding: 10px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;">
                    Test Post 456
                </button>
                <button onclick="diagnosePage()" style="padding: 10px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer;">
                    Diagnose Page
                </button>
            </div>
        </div>

        <!-- Test post with archived mode -->
        <div class="social_feed" data-post-id="123" data-post-type="advertising">
            <div class="social_feed_user_name">
                <div class="social_feed_user_name_image">
                    <div style="width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; font-size: 32px;">
                        ðŸ‘¤
                    </div>
                    <div class="social_feed_user_text_name">
                        Test User
                    </div>
                </div>
                <div class="advertising_social_feed_menu">
                    <button class="advertising_social_feed_menu_trigger" id="menu_trigger_123" type="button">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                        </svg>
                    </button>
                    <div class="advertising_social_feed_overflow_menu" id="overflow_menu_123">
                        <div class="advertising_social_feed_overflow_menu_item edit" data-action="edit" data-id="123">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                            </svg>
                            Edit
                        </div>
                        <div class="advertising_social_feed_overflow_menu_item unarchive" data-action="unarchive" data-id="123">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5l-4-4h2.5V12h3v1.5H16l-4 4z"/>
                            </svg>
                            Unarchive
                        </div>
                        <div class="advertising_social_feed_overflow_menu_item remove" data-action="remove" data-id="123">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                            </svg>
                            Remove
                        </div>
                    </div>
                </div>
            </div>
            <div class="post_info">
                <span class="post_id">123</span>
                <span class="post_date">01.01.2024</span>
            </div>
            <div class="social_feed_text">
                <p>This is a test post to verify dropdown menu functionality.</p>
            </div>
            <div class="post_actions">
                <div class="action_buttons">
                    <button class="action_btn">Chat</button>
                    <button class="action_btn">Comments</button>
                </div>
                <button class="order_now">Order now</button>
            </div>
        </div>

        <!-- Test post with draft mode -->
        <div class="social_feed" data-post-id="456" data-post-type="advertising">
            <div class="social_feed_user_name">
                <div class="social_feed_user_name_image">
                    <div style="width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; font-size: 32px;">
                        ðŸ‘¤
                    </div>
                    <div class="social_feed_user_text_name">
                        Test User 2
                    </div>
                </div>
                <div class="advertising_social_feed_menu">
                    <button class="advertising_social_feed_menu_trigger" id="menu_trigger_456" type="button">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                        </svg>
                    </button>
                    <div class="advertising_social_feed_overflow_menu" id="overflow_menu_456">
                        <div class="advertising_social_feed_overflow_menu_item edit" data-action="edit" data-id="456">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                            </svg>
                            Edit
                        </div>
                        <div class="advertising_social_feed_overflow_menu_item publish" data-action="publish" data-id="456">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                            </svg>
                            Publish
                        </div>
                        <div class="advertising_social_feed_overflow_menu_item archive" data-action="archive" data-id="456">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5l-4-4h2.5V12h3v1.5H16l-4 4z"/>
                            </svg>
                            Archive
                        </div>
                    </div>
                </div>
            </div>
            <div class="post_info">
                <span class="post_id">456</span>
                <span class="post_date">02.01.2024</span>
            </div>
            <div class="social_feed_text">
                <p>This is another test post to verify dropdown menu functionality.</p>
            </div>
            <div class="post_actions">
                <div class="action_buttons">
                    <button class="action_btn">Chat</button>
                    <button class="action_btn">Comments</button>
                </div>
                <button class="order_now">Order now</button>
            </div>
        </div>
    </div>

    <script src="static/js/advertising_feed.js"></script>
    
    <script>
        console.log('Test page loaded');
        console.log('Testing dropdown functionality...');
        
        // Test functions
        function testDropdown123() {
            if (window.AdvertisingFeedUtils) {
                window.AdvertisingFeedUtils.testDropdown('123');
            } else {
                console.error('AdvertisingFeedUtils not available');
            }
        }
        
        function testDropdown456() {
            if (window.AdvertisingFeedUtils) {
                window.AdvertisingFeedUtils.testDropdown('456');
            } else {
                console.error('AdvertisingFeedUtils not available');
            }
        }
        
        function diagnosePage() {
            if (window.AdvertisingFeedUtils) {
                window.AdvertisingFeedUtils.diagnosePage();
            } else {
                console.error('AdvertisingFeedUtils not available');
            }
        }
        
        // Wait for AdvertisingFeed to initialize
        setTimeout(() => {
            console.log('AdvertisingFeed object:', window.AdvertisingFeed);
            console.log('AdvertisingFeedUtils object:', window.AdvertisingFeedUtils);
            
            // Test manual dropdown opening
            if (window.AdvertisingFeedUtils) {
                console.log('Testing manual dropdown opening...');
                window.AdvertisingFeedUtils.openDropdownById('123');
                
                setTimeout(() => {
                    console.log('Testing manual dropdown closing...');
                    window.AdvertisingFeedUtils.closeDropdownById('123');
                }, 2000);
            }
        }, 1000);
    </script>
</body>
</html>
