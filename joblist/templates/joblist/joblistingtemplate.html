{% extends "home/base.html" %}
{% load static %}



{% block content %}
<header class="site-header">
    <div class="section-overlay"></div>

    <div class="container">
        <div class="row">
            
            <div class="col-lg-12 col-12 text-center">
                <h1 class="text-white">Job Listings</h1>

                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb justify-content-center">
                        <li class="breadcrumb-item"><a href="index.html">Home</a></li>

                        <li class="breadcrumb-item active" aria-current="page">Job listings</li>
                    </ol>
                </nav>
            </div>

        </div>
    </div>
</header>

<section class="section-padding pb-0 d-flex justify-content-center align-items-center">
    <div class="container">
        <div class="row">

            <div class="col-lg-12 col-12">


                <form class="custom-form hero-form" action="{% url 'joblist:joblisting' %}" method="get" role="form">
                    <h3 class="text-white mb-3">Search your dream job</h3>
                    
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-12">
                            <div class="input-group">
                                <span class="input-group-text" id="basic-addon1"><i class="bi-person custom-icon"></i></span>

                                <input type="text" name="job_title" id="job-title" class="form-control" placeholder="Job Title" value="{{ search_params.job_title }}">

                            </div>
                        </div>

                        <div class="col-lg-6 col-md-6 col-12">
                            <div class="input-group">
                                <span class="input-group-text" id="basic-addon1"><i class="bi bi-bank2 custom-icon"></i></span>

                                <input type="text" name="company-name" id="company-name" class="form-control" placeholder="Company name" value="{{ search_params.company_name }}">
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-12">
                            <div class="input-group">
                                <span class="input-group-text" id="basic-addon1"><i class="bi bi-geo-alt custom-icon"></i></span>
                                <select class="form-select form-control" name="town-city" id="town-city">
                                    <option value="">Town city</option>
                                    {% for city in town_cities %}
                                        <option value="{{ city.id }}" {% if search_params.town_city == city.id|stringformat:"s" %}selected{% endif %}>
                                            {{ city.town_city }}
                                        </option>
                                    {% endfor %}
                                </select>                              
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-12">
                            <div class="input-group">
                                <span class="input-group-text" id="basic-addon1"><i class="bi-laptop custom-icon"></i></span>

                                <select class="form-select form-control" name="employment-type" id="employment-type">
                                    <option value="">Employment type</option>
                                    {% for type in employment_types %}
                                        <option value="{{ type.id }}" {% if search_params.employment_type == type.id|stringformat:"s" %}selected{% endif %}>
                                            {{ type.name }}
                                        </option>
                                    {% endfor %}
                                </select>                           
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-12">
                            <div class="input-group">
                                <span class="input-group-text" id="basic-addon1"><i class="bi-laptop custom-icon"></i></span>
                                <select class="form-select form-control" name="work-model" id="work-model">
                                    <option value="">Work model</option>
                                    {% for model in work_models %}
                                        <option value="{{ model.id }}" {% if search_params.work_model == model.id|stringformat:"s" %}selected{% endif %}>
                                            {{ model.name }}
                                        </option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>

                        <div class="col-lg-6 col-md-6 col-12">
                            <div class="input-group">
                                <span class="input-group-text" id="basic-addon1"><i class="bi-person custom-icon"></i></span>
                                <select class="form-select form-control" name="contract-type" id="contract-type">
                                    <option value="">Contract type</option>
                                    {% for type in contract_types %}
                                        <option value="{{ type.id }}" {% if search_params.contract_type == type.id|stringformat:"s" %}selected{% endif %}>
                                            {{ type.contract_type }}
                                        </option>
                                    {% endfor %}
                                </select>
                                
                            </div>
                        </div>

                        <div class="col-lg-6 col-md-6 col-12">
                            <div class="input-group">
                                <span class="input-group-text" id="basic-addon1"><i class="bi bi-bank2 custom-icon"></i></span>
                                <select class="form-select form-control" name="visa-name" id="visa-name">
                                    <option value="">Visa name</option>
                                    {% for visa in visa_names %}
                                        <option value="{{ visa.id }}" {% if search_params.visa_name == visa.id|stringformat:"s" %}selected{% endif %}>
                                            {{ visa.visa_names }}
                                        </option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>

                        <div class="col-lg-12 col-12">
                            <button type="submit" class="form-control">
                                Search job
                            </button>
                        </div>

                        <div class="col-12">
                            <div class="d-flex flex-wrap align-items-center mt-4 mt-lg-0">
                                <span class="text-white mb-lg-0 mb-md-0 me-2">Popular keywords:</span>

                                <div>
                                    <a href="job-listings.html" class="badge">Web design</a>

                                    <a href="job-listings.html" class="badge">Marketing</a>

                                    <a href="job-listings.html" class="badge">Customer support</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="col-lg-6 col-12">
                <img src="{% static "images/4557388.png" %}" class="hero-image img-fluid" alt="">
            </div>

        </div>
    </div>
</section>


    <section class="job-section job-featured-section section-padding" id="job-section">
        <div class="container">
            <div class="row">

                <div class="col-lg-6 col-12 text-center mx-auto mb-4">
                    <h2>Featured Jobs</h2>

                   
                </div>

             <div class="col-lg-12 col-12">
                    {% if no_results %}
                          <div class="alert alert-warning text-center" role="alert">
                                  No results found for your search criteria.
                          </div>
                     {% else %}
                    
                 
                    {% for vacancy in page_obj.object_list %}                      
                    <div class="job-thumb d-flex">
                        <div class="job-image-wrap bg-white shadow-lg">
                                    <img src="{{ vacancy.id_company.get_logo }}" class="job-image img-fluid" alt="Logo">
                        </div>
    
                        <div class="job-body d-flex flex-wrap flex-auto align-items-center ms-4">
                            <div class="mb-3">
                                <h4 class="job-title mb-lg-0">
                                    <a href="{% url 'joblist:jobdetails' vacancy.id %}" class="job-title-link" target="_blank"> {{ vacancy.job_title }}</a>
                                </h4>
    
                                <div class="d-flex flex-wrap align-items-center">
                                    <p class="job-location mb-0">
                                        <i class="custom-icon bi-geo-alt me-1"></i>
                                        {{ vacancy.country.countries }}, {{ vacancy.town_city.town_city }}
                                    </p>
    
                                    <p class="job-date mb-0">
                                        <i class="custom-icon bi-clock me-1"></i>
                                        {{ vacancy.posting_date }} 
                                    </p>
    
                                    <p class="job-price mb-0">
                                        <i class="custom-icon bi-cash me-1"></i>
                                        £{{ vacancy.salary_1|floatformat:2 }}
                                    </p>
    
                                    <div class="d-flex">
                                        {% for tag in vacancy.tags.all|slice:":2" %}
                                        <p class="mb-0">
                                            <a href="#" class="badge badge-level">{{ tag.tag }}</a>
                                        </p>
                                         {% endfor %}
                                    </div>
                                </div>
                            </div>
    
                            <div class="job-section-btn-wrap">
                                <a href="{% url 'joblist:jobdetails' vacancy.id %}" class="custom-btn btn" target="_blank">View</a>
                            </div>
                        </div>
                    </div>
             
                    {% endfor %}
                        <nav>
                            <ul class="pagination">
                                {% if page_obj.has_previous %}
                                    <li class="page-item">
                                        <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                {% endif %}
                                {% for num in page_obj.paginator.page_range %}
                                    <li class="page-item {% if page_obj.number == num %}active{% endif %}">
                                        <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                                    </li>
                                {% endfor %}
                                {% if page_obj.has_next %}
                                    <li class="page-item">
                                        <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                {% endif %}
                            </ul>
                        </nav>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>


<section class="cta-section">
    <div class="section-overlay"></div>

    <div class="container">
        <div class="row">

            <div class="col-lg-6 col-10">
                <h2 class="text-white mb-2">Over 10k opening jobs</h2>

                <p class="text-white">Gotto Job is a free HTML CSS template for job hunting related websites. This layout is based on the famous Bootstrap 5 CSS framework. Thank you for visiting Tooplate website.</p>
            </div>

            <div class="col-lg-4 col-12 ms-auto">
                <div class="custom-border-btn-wrap d-flex align-items-center mt-lg-4 mt-2">
                    <a href="#" class="custom-btn custom-border-btn btn me-4">Create an account</a>

                    <a href="#" class="custom-link">Post a job</a>
                </div>
            </div>

        </div>
    </div>
</section>

{% endblock %}