/* ============================================
   Agenda View Styles - React Big Calendar
   ============================================ */

:root {
  --agenda-event-opacity: 0.8;
  --agenda-event-hover-opacity: 0.9;
  --agenda-event-radius: 3px;
  --agenda-resize-opacity: 0.7;
  --agenda-resize-scale: 1.05;
  --agenda-resize-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
  --agenda-color-blue: #3174ad;
  --agenda-color-red: #f56565;
  --agenda-color-orange: #ed8936;
  --agenda-color-green: #48bb78;
  --agenda-color-preview: #4285f4;
}

/* Common event styles */
.agenda-event-default,
.agenda-event-priority-high,
.agenda-event-priority-medium,
.agenda-event-priority-low,
.agenda-event-done {
  border-radius: var(--agenda-event-radius) ;
  opacity: var(--agenda-event-opacity) ;
  color: white ;
  border: 0 ;
  display: block ;
  transition: opacity 0.2s ease ;
}

/* Event colors */
.agenda-event-default { background-color: var(--agenda-color-blue) ; }
.agenda-event-priority-high { background-color: var(--agenda-color-red) ; }
.agenda-event-priority-medium { background-color: var(--agenda-color-orange) ; }
.agenda-event-priority-low,
.agenda-event-done { background-color: var(--agenda-color-green) ; }

/* Hover states */
.agenda-event-default:hover,
.agenda-event-priority-high:hover,
.agenda-event-priority-medium:hover,
.agenda-event-priority-low:hover {
  opacity: var(--agenda-event-hover-opacity) ;
}

/* Done task specific */
.agenda-event-done {
  cursor: not-allowed ;
}

.agenda-event-done:hover {
  opacity: 0.7 ;
}

.agenda-event-done .rbc-event-label,
.agenda-event-done .rbc-event-content {
  cursor: not-allowed ;
}

/* Resizing event styles */
.agenda-event-resizing,
.rbc-event.agenda-event-resizing {
  opacity: var(--agenda-resize-opacity) ;
  transform: scale(var(--agenda-resize-scale)) ;
  box-shadow: var(--agenda-resize-shadow) ;
  border: 3px solid var(--agenda-color-preview) ;
  transition: none ;
}

.agenda-event-resizing {
  z-index: 9999 ;
  cursor: ns-resize ;
  background-color: rgba(66, 133, 244, 0.1) ;
}

.rbc-event-content.agenda-event-resizing {
  opacity: var(--agenda-resize-opacity) ;
}

/* ============================================
   Drag Preview Fix - Limit All-Day Event Height
   ============================================ */

.rbc-addons-dnd-dragging.rbc-event-allday,
.rbc-addons-dnd-dragging .rbc-event-allday {
  max-height: 60px ;
  height: auto ;
}

.rbc-day-slot .rbc-addons-dnd-dragging,
.rbc-time-content .rbc-addons-dnd-dragging[class*="allday"],
.rbc-time-content .rbc-addons-dnd-drag-preview {
  height: 4.16667% ; /* 1 hour = 4.16667% of 24h */
  min-height: 50px ;
  max-height: 60px ;
}

/* ============================================
   Custom Event Layout: Title and Time in One Line
   ============================================ */

/* Hide default react-big-calendar time label for timeline events */
.rbc-time-slot .rbc-event-label,
.rbc-time-slot .rbc-event .rbc-event-label,
.rbc-time-column .rbc-event-label,
.rbc-day-slot .rbc-event-label,
div.rbc-time-slot div.rbc-event div.rbc-event-label {
  display: none ;
  visibility: hidden ;
  opacity: 0 ;
  height: 0 ;
  overflow: hidden ;
}

/* Custom event header layout - horizontal */
.agenda-event-header {
  display: flex ;
  align-items: center ;
  gap: 8px ;
  width: 100% ;
  min-width: 0 ;
}

/* Title - flexible width, can truncate */
.agenda-event-header .agenda-event-title {
  flex: 1 ;
  font-weight: 600 ;
  font-size: 13px ;
  white-space: nowrap ;
  overflow: hidden ;
  text-overflow: ellipsis ;
  line-height: 1.2 ;
}

/* Time - fixed width, always visible */
.agenda-event-header .agenda-event-time {
  flex-shrink: 0 ;
  font-size: 10px ;
  font-weight: 500 ;
  white-space: nowrap ;
  opacity: 0.85 ;
}

/* Make sure agenda-calendar-event fills the space properly */
.rbc-time-slot .agenda-calendar-event {
  display: flex ;
  flex-direction: column ;
  height: 100% ;
  padding: 4px 6px ;
  position: relative ;
  /* REMOVED: pointer-events: none - was blocking live resize preview */
}

/* Keep all-day events showing the default label */
.rbc-allday-cell .rbc-event-label {
  display: block ;
}

/* ============================================
   Resize Handles - Google Calendar Style
   ============================================ */

.rbc-addons-dnd-resize-ns-anchor {
  position: absolute ;
  width: 100% ;
  height: 15px ;
  z-index: 1000 ;
  cursor: ns-resize ;
  background: transparent ;
}

.rbc-addons-dnd-resize-ns-anchor:first-child { top: 0 ; left: 0 ; }
.rbc-addons-dnd-resize-ns-anchor:last-child { bottom: 0 ; left: 0 ; }
.rbc-addons-dnd-resize-ns-anchor:hover { background: rgba(255, 255, 255, 0.2) ; }

.rbc-addons-dnd-resize-ns-icon {
  width: 100% ;
  height: 100% ;
  opacity: 0 ;
  transition: opacity 0.2s ease ;
}

.rbc-addons-dnd-resize-ns-anchor:hover .rbc-addons-dnd-resize-ns-icon { opacity: 0.8 ; }

/* ============================================
   Drag Preview (All-Day → Timeline) - Subtle
   ============================================ */

.rbc-addons-dnd-dragging .rbc-addons-dnd-drag-preview {
  opacity: 0.85 ;
  transition: none ;
  z-index: 9999 ;
  /* NO scale, NO thick border - just semi-transparent */
}

.rbc-addons-dnd-dragging .rbc-addons-dnd-drag-preview .agenda_floating_icons {
  display: none ;
}

/* ============================================
   Resize Preview - Prominent Visual Feedback
   ============================================ */

.rbc-addons-dnd-resizing .rbc-addons-dnd-drag-preview {
  opacity: var(--agenda-resize-opacity) ;
  transform: scale(var(--agenda-resize-scale)) ;
  box-shadow: var(--agenda-resize-shadow) ;
  border: 3px solid var(--agenda-color-preview) ;
  background: rgba(66, 133, 244, 0.1) ;
  transition: none ;
  z-index: 9999 ;
}

/* Priority colors - only during RESIZE */
.rbc-addons-dnd-resizing .rbc-addons-dnd-drag-preview.agenda-event-priority-high {
  border-color: var(--agenda-color-red) ;
  box-shadow: 0 8px 24px rgba(245, 101, 101, 0.5) ;
}

.rbc-addons-dnd-resizing .rbc-addons-dnd-drag-preview.agenda-event-priority-medium {
  border-color: var(--agenda-color-orange) ;
  box-shadow: 0 8px 24px rgba(237, 137, 54, 0.5) ;
}

.rbc-addons-dnd-resizing .rbc-addons-dnd-drag-preview.agenda-event-priority-low {
  border-color: var(--agenda-color-green) ;
  box-shadow: 0 8px 24px rgba(72, 187, 120, 0.5) ;
}

.rbc-addons-dnd-resizing .rbc-addons-dnd-drag-preview .agenda_floating_icons {
  display: none ;
}

/* Resizable container */
.rbc-addons-dnd-resizable {
  position: relative ;
  height: 100% ;
  width: 100% ;
  transition: none ;
}

.rbc-addons-dnd-resizing .rbc-addons-dnd-resizable {
  border: 2px solid rgba(66, 133, 244, 0.4) ;
  animation: resize-pulse 0.3s ease-in-out;
}

@keyframes resize-pulse {
  0%, 100% { border-color: rgba(66, 133, 244, 0.4); }
  50% { border-color: rgba(66, 133, 244, 0.6); }
}

/* Floating icons */
.agenda_floating_icons {
  opacity: 0 ;
  transition: opacity 0.2s ease ;
  pointer-events: none ;
}

.rbc-event:hover:not(.rbc-addons-dnd-resizing) .agenda_floating_icons {
  opacity: 1 ;
  pointer-events: auto ;
}

/* ============================================
   Touch Support for Mobile Resize
   ============================================ */

/* Larger hit area for resize handles on mobile */
@media (hover: none) and (pointer: coarse) {
  .rbc-addons-dnd-resize-ns-anchor {
    height: 25px ; /* Збільшено з 15px до 25px для кращого захоплення пальцем */
  }
  
  /* Always show resize handles on touch devices */
  .rbc-addons-dnd-resize-ns-icon {
    opacity: 0.4 ;
  }
  
  .rbc-addons-dnd-resize-ns-anchor:active .rbc-addons-dnd-resize-ns-icon {
    opacity: 1 ;
  }
}

/* Prevent text selection during touch resize */
.rbc-addons-dnd-resizing {
  user-select: none ;
  -webkit-user-select: none ;
  -webkit-touch-callout: none ;
}

