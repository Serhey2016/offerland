/* ============================================
   Agenda View Styles - React Big Calendar
   ============================================ */

/* Default event style */
.agenda-event-default {
  background-color: #3174ad !important;
  border-radius: 3px !important;
  opacity: 0.8 !important;
  color: white !important;
  border: 0 !important;
  display: block !important;
  transition: opacity 0.2s ease !important;
}

.agenda-event-default:hover {
  opacity: 0.9 !important;
}

/* Priority-based event styles */
.agenda-event-priority-high {
  background-color: #f56565 !important; /* red */
  border-radius: 3px !important;
  opacity: 0.8 !important;
  color: white !important;
  border: 0 !important;
  display: block !important;
  transition: opacity 0.2s ease !important;
}

.agenda-event-priority-high:hover {
  opacity: 0.9 !important;
}

.agenda-event-priority-medium {
  background-color: #ed8936 !important; /* orange */
  border-radius: 3px !important;
  opacity: 0.8 !important;
  color: white !important;
  border: 0 !important;
  display: block !important;
  transition: opacity 0.2s ease !important;
}

.agenda-event-priority-medium:hover {
  opacity: 0.9 !important;
}

.agenda-event-priority-low {
  background-color: #48bb78 !important; /* green */
  border-radius: 3px !important;
  opacity: 0.8 !important;
  color: white !important;
  border: 0 !important;
  display: block !important;
  transition: opacity 0.2s ease !important;
}

.agenda-event-priority-low:hover {
  opacity: 0.9 !important;
}

/* Done task style - green with locked cursor */
.agenda-event-done {
  background-color: #48bb78 !important; /* green */
  border-radius: 3px !important;
  opacity: 0.8 !important;
  color: white !important;
  border: 0 !important;
  display: block !important;
  cursor: not-allowed !important; /* indicates drag is disabled */
  transition: opacity 0.2s ease !important;
}

.agenda-event-done:hover {
  opacity: 0.7 !important; /* slightly less opacity to indicate it's locked */
}

/* Disable drag cursor for done events */
.agenda-event-done .rbc-event-label,
.agenda-event-done .rbc-event-content {
  cursor: not-allowed !important;
}

/* Direct styling for resizing event - live preview feedback */
.agenda-event-resizing {
  opacity: 0.7 !important;
  transform: scale(1.05) !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5) !important;
  transition: none !important;
  z-index: 9999 !important;
  cursor: ns-resize !important;
  border: 3px solid #4285f4 !important;
  background-color: rgba(66, 133, 244, 0.1) !important;
}

/* Also target nested elements */
.rbc-event.agenda-event-resizing {
  opacity: 0.7 !important;
  transform: scale(1.05) !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5) !important;
  border: 3px solid #4285f4 !important;
}

.rbc-event-content.agenda-event-resizing {
  opacity: 0.7 !important;
}

/* ============================================
   Drag Preview Fix - Limit All-Day Event Height
   ============================================ */

/* Limit drag preview height when dragging all-day events to timeline */
.rbc-addons-dnd-dragging.rbc-event-allday,
.rbc-addons-dnd-dragging .rbc-event-allday {
  max-height: 60px !important;
  height: auto !important;
}

/* Force 1-hour height for drag preview in day view */
.rbc-day-slot .rbc-addons-dnd-dragging {
  height: 4.16667% !important; /* 1 hour out of 24 hours = 4.16667% */
  min-height: 50px !important;
  max-height: 60px !important;
}

/* Specifically for all-day events being dragged into time slots */
.rbc-time-content .rbc-addons-dnd-dragging[class*="allday"],
.rbc-time-content .rbc-addons-dnd-drag-preview {
  height: 4.16667% !important;
  max-height: 60px !important;
  min-height: 50px !important;
}

/* ============================================
   Custom Event Layout: Title and Time in One Line
   ============================================ */

/* Hide default react-big-calendar time label for timeline events */
.rbc-time-slot .rbc-event-label,
.rbc-time-slot .rbc-event .rbc-event-label,
.rbc-time-column .rbc-event-label,
.rbc-day-slot .rbc-event-label,
div.rbc-time-slot div.rbc-event div.rbc-event-label {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  height: 0 !important;
  overflow: hidden !important;
}

/* Custom event header layout - horizontal */
.agenda-event-header {
  display: flex !important;
  align-items: center !important;
  gap: 8px !important;
  width: 100% !important;
  min-width: 0 !important;
}

/* Title - flexible width, can truncate */
.agenda-event-header .agenda-event-title {
  flex: 1 !important;
  font-weight: 600 !important;
  font-size: 13px !important;
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  line-height: 1.2 !important;
}

/* Time - fixed width, always visible */
.agenda-event-header .agenda-event-time {
  flex-shrink: 0 !important;
  font-size: 10px !important;
  font-weight: 500 !important;
  white-space: nowrap !important;
  opacity: 0.85 !important;
}

/* Make sure agenda-calendar-event fills the space properly */
.rbc-time-slot .agenda-calendar-event {
  display: flex !important;
  flex-direction: column !important;
  height: 100% !important;
  padding: 4px 6px !important;
  position: relative !important;
  /* REMOVED: pointer-events: none - was blocking live resize preview */
}

/* Keep all-day events showing the default label */
.rbc-allday-cell .rbc-event-label {
  display: block !important;
}

/* ============================================
   Resize Handles - Google Calendar Style
   ============================================ */

/* Resize handles with highest priority and larger hit area */
.rbc-addons-dnd-resize-ns-anchor {
  position: absolute !important;
  width: 100% !important;
  height: 15px !important; /* Increased from 10px for easier grab */
  z-index: 1000 !important; /* Very high to be above everything */
  cursor: ns-resize !important;
  background: transparent !important;
}

/* Top resize handle */
.rbc-addons-dnd-resize-ns-anchor:first-child {
  top: 0 !important;
  left: 0 !important;
}

/* Bottom resize handle */
.rbc-addons-dnd-resize-ns-anchor:last-child {
  bottom: 0 !important;
  left: 0 !important;
}

/* Visual feedback on hover */
.rbc-addons-dnd-resize-ns-anchor:hover {
  background: rgba(255, 255, 255, 0.2) !important;
}

/* Resize icon subtle hint */
.rbc-addons-dnd-resize-ns-icon {
  width: 100% !important;
  height: 100% !important;
  opacity: 0 !important;
  transition: opacity 0.2s ease !important;
}

.rbc-addons-dnd-resize-ns-anchor:hover .rbc-addons-dnd-resize-ns-icon {
  opacity: 0.8 !important;
}

/* Live resize/drag preview - Google Calendar style - ENHANCED */
.rbc-addons-dnd-drag-preview {
  opacity: 0.7 !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5) !important;
  transition: none !important;
  transform: scale(1.05) !important;
  z-index: 9999 !important;
  border: 3px solid #4285f4 !important;
  background: rgba(66, 133, 244, 0.1) !important;
}

/* Apply preview effects to specific event priority classes */
.rbc-addons-dnd-drag-preview.agenda-event-priority-high {
  border-color: #f56565 !important;
  box-shadow: 0 8px 24px rgba(245, 101, 101, 0.5) !important;
}

.rbc-addons-dnd-drag-preview.agenda-event-priority-medium {
  border-color: #ed8936 !important;
  box-shadow: 0 8px 24px rgba(237, 137, 54, 0.5) !important;
}

.rbc-addons-dnd-drag-preview.agenda-event-priority-low {
  border-color: #48bb78 !important;
  box-shadow: 0 8px 24px rgba(72, 187, 120, 0.5) !important;
}

/* Hide floating icons during drag/resize */
.rbc-addons-dnd-drag-preview .agenda_floating_icons {
  display: none !important;
}

/* Ensure resizable container allows live preview */
.rbc-addons-dnd-resizable {
  position: relative !important;
  height: 100% !important;
  width: 100% !important;
  transition: none !important; /* Remove transition for immediate feedback */
}

/* Visual indicator during resize - border pulse */
.rbc-addons-dnd-resizing .rbc-addons-dnd-resizable {
  border: 2px solid rgba(66, 133, 244, 0.4) !important;
  animation: resize-pulse 0.3s ease-in-out;
}

@keyframes resize-pulse {
  0%, 100% {
    border-color: rgba(66, 133, 244, 0.4);
  }
  50% {
    border-color: rgba(66, 133, 244, 0.6);
  }
}

/* Floating icons - only show on hover, hide during resize */
.agenda_floating_icons {
  opacity: 0 !important;
  transition: opacity 0.2s ease !important;
  pointer-events: none !important;
}

.rbc-event:hover:not(.rbc-addons-dnd-resizing) .agenda_floating_icons {
  opacity: 1 !important;
  pointer-events: auto !important;
}

