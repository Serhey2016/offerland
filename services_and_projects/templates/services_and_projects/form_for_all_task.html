{% load static %}

<!-- Include Type Selection Modal -->
{% include 'services_and_projects/types_feed_form.html' %}

<!-- Alertify CSS -->
<link rel="stylesheet" href="{% static 'css/lib_alertify/alertify.min.css' %}">
<link rel="stylesheet" href="{% static 'css/lib_alertify/themes/default.min.css' %}">

<!-- Main CSS for forms -->
<link rel="stylesheet" href="{% static 'css/serv_and_proj_empty_form.css' %}">
<!-- My List Form specific CSS -->
<link rel="stylesheet" href="{% static 'css/my_task_feed.css' %}">

<!-- Advertising Form -->
<div id="advertising-form" class="modal-overlay" style="display: none;">
    <div class="modal-form">
        <div class="modal-header-actions">
            <h2>Create Advertising</h2>
            <button class="modal_close_btn">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                </svg>
            </button>
        </div>

        <form class="project-form" id="advertising-form" method="post" enctype="multipart/form-data" action="{% url 'services_and_projects:submit_form' %}">
            {% csrf_token %}
            <input type="hidden" name="type_of_view" value="advertising"> <!-- Advertising -->
            
            <div class="form-group">
                <label for="advertising-title">Title</label>
                <input type="text" id="advertising-title" name="title" required>
            </div>
            
            <div class="form-group">
                <label for="advertising-description">Description</label>
                <textarea id="advertising-description" name="description" rows="4" required></textarea>
            </div>
            
            <div class="form-group">
                <label for="advertising-photos">Photos</label>
                <div class="file-upload-area">
                    <input type="file" id="advertising-photos" name="photos" multiple accept="image/*">
                    <div class="drop-zone">
                        <p>Drop files here or click to upload</p>
                    </div>
                </div>
            </div>
             

            
            <div class="form-actions">
                <button type="button" class="btn btn-secondary save-btn">Save</button>
            </div>
        </form>
    </div>
</div>

<!-- Job Search Form -->
<div id="job-search-form" class="modal-overlay" style="display: none;">
    <div class="modal-form">
        <div class="modal-header-actions">
            <h2>Create Job Search</h2>
            <button class="modal_close_btn">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                </svg>
            </button>
        </div>

        <form class="project-form" id="job-search-form" method="post" action="{% url 'services_and_projects:submit_form' %}">
            {% csrf_token %}
            <input type="hidden" name="type_of_view" value="job_search"> <!-- Job Search -->
            
            <div class="form-group">
                <label for="job-search-title">Title</label>
                <input type="text" id="job-search-title" name="title" required>
            </div>
            

            
            <input type="hidden" name="hashtags" id="job-search-hashtags-hidden">
            
            <div class="form-actions">
                <button type="button" class="btn btn-secondary save-btn">Save</button>
            </div>
        </form>
    </div>
</div>

<!-- Time Slot Form -->
<div id="time-slot-form" class="modal-overlay" style="display: none;">
    <div class="modal-form">
        <button class="modal_close_btn">
            <svg width="24" height="24" viewBox="0 0 24 24">
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
            </svg>
        </button>

        <form class="project-form" id="time-slot-form-element" method="post" action="{% url 'services_and_projects:submit_form' %}">
            {% csrf_token %}
            <input type="hidden" name="type_of_view" value="task"> <!-- Time Slot -->
            
            <div class="form-group">
                <label for="time-slot-category">Category</label>
                <select id="time-slot-category" name="category" required>
                    <option value="">-- Select category --</option>
                    {% for cat in categories %}
                    <option value="{{ cat.id }}">{{ cat.category_name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="time-slot-service">Service</label>
                <select id="time-slot-service" name="services" required>
                    <option value="">-- Select service --</option>
                    {% for serv in services %}
                    <option value="{{ serv.id }}" data-category="{{ serv.category_name.id }}">{{ serv.service_name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-row">
                <div class="form-group half">
                    <label for="time-slot-date-start">Date and time start</label>
                    <input type="date" id="time-slot-date-start" name="date_start" required>
                    <input type="time" id="time-slot-time-start" name="time_start" class="time-input" required>
                </div>
                <div class="form-group half">
                    <label for="time-slot-date-end">Date and time end</label>
                    <input type="date" id="time-slot-date-end" name="date_end" required>
                    <input type="time" id="time-slot-time-end" name="time_end" class="time-input" required>
                </div>
            </div>
            
            <div class="form-group">
                <label for="time-slot-reserved-time">Reserved time on road (minutes)</label>
                <input type="number" id="time-slot-reserved-time" name="reserved_time_on_road" placeholder="e.g. 30" required>
            </div>
            
            <div class="form-group">
                <label for="time-slot-start-location">Start location (post-code)</label>
                <input type="text" id="time-slot-start-location" name="start_location" placeholder="Enter start location" required>
            </div>
            
            <div class="form-group">
                <label for="time-slot-cost-hour">Cost of one hour of work in £</label>
                <input type="number" id="time-slot-cost-hour" name="cost_of_1_hour_of_work" placeholder="e.g. 100" step="0.01" required>
            </div>
            
            <div class="form-group">
                <label for="time-slot-min-slot">Minimum slot</label>
                <input type="text" id="time-slot-min-slot" name="minimum_time_slot" placeholder="e.g. 9 hours" required>
            </div>
            
            <div class="form-group">
                <label for="time-slot-hashtags">Hashtags: <a href="#">Don't find hashtag?</a></label>
                <div id="time-slot-hashtags-container" class="form-control hashtag-chip-container" tabindex="0" data-all-tags='{{ all_tags|safe }}'>
                    <input type="text" id="time-slot-hashtags-input" placeholder="Start typing tag..." autocomplete="off" class="hashtags-input-field">
                </div>
                <div id="time-slot-hashtags-dropdown" class="hashtag-dropdown-menu"></div>
            </div>
            
            <input type="hidden" name="hashtags" id="time-slot-hashtags-hidden">
            
            <div class="form-actions">
                <button type="button" class="btn btn-secondary save-btn">Save</button>
            </div>
        </form>
    </div>
</div>

<!-- My List Form -->
<div id="my-list-form" class="modal-overlay" style="display: none;">
    <div class="modal-form">
        <div class="modal-header-actions">
            <h2>Create Task</h2>
            <button class="modal_close_btn">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                </svg>
            </button>
        </div>

        <form class="project-form" id="my-list-form" method="post" action="{% url 'services_and_projects:submit_form' %}">
            {% csrf_token %}
            <input type="hidden" name="type_of_view" value="task"> <!-- My List -->
            
            <div class="form-group">
                <label for="my-list-title">Title</label>
                <input type="text" id="my-list-title" name="title" required>
            </div>
            
            <div class="form-group">
                <label for="my-list-description">Description</label>
                <textarea id="my-list-description" name="description" rows="4" required></textarea>
            </div>
            
            <div class="form-group">
                <label for="my-list-hashtags">Hashtags: <a href="#">Don't find hashtag?</a></label>
                <div id="my-list-hashtags-container" class="form-control hashtag-chip-container" tabindex="0" data-all-tags='{{ all_tags|safe }}'>
                    <input type="text" id="my-list-hashtags-input" placeholder="Start typing tag..." autocomplete="off" class="hashtags-input-field">
                </div>
                <div id="my-list-hashtags-dropdown" class="hashtag-dropdown-menu"></div>
            </div>
            
            <input type="hidden" name="hashtags" id="my-list-hashtags-hidden">
            
            <div class="form-actions">
                <button type="button" class="btn btn-secondary save-btn">Save</button>
            </div>
        </form>
    </div>
</div>

<!-- Tender Form -->
<div id="tender-form" class="modal-overlay" style="display: none;">
    <div class="modal-form">
        <div class="modal-header-actions">
            <h2>Create Tender</h2>
            <button class="modal_close_btn">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                </svg>
            </button>
        </div>

        <form class="project-form" id="tender-form" method="post" action="{% url 'services_and_projects:submit_form' %}">
            {% csrf_token %}
            <input type="hidden" name="type_of_view" value="tender"> <!-- Tender -->
            
            <div class="form-group">
                <label for="tender-title">Title</label>
                <input type="text" id="tender-title" name="title" required>
            </div>
            
            <div class="form-group">
                <label for="tender-description">Description</label>
                <textarea id="tender-description" name="description" rows="4" required></textarea>
            </div>
            
            <div class="form-group">
                <label for="tender-photos">Photos - link</label>
                <input type="text" id="tender-photos" name="photos-link" placeholder="link to google drive">
            </div>
            
            <div class="form-group">
                <label for="tender-category">Category</label>
                <select id="tender-category" name="category" required>
                    <option value="">-- Select category --</option>
                    {% for cat in categories %}
                    <option value="{{ cat.id }}">{{ cat.category_name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="tender-service">Service</label>
                <select id="tender-service" name="service" required>
                    <option value="">-- Select service --</option>
                    {% for serv in services %}
                    <option value="{{ serv.id }}" data-category="{{ serv.category_name.id }}">{{ serv.service_name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="tender-hashtags">Hashtags: <a href="#">Don't find hashtag?</a></label>
                <div id="tender-hashtags-container" class="form-control hashtag-chip-container" tabindex="0" data-all-tags='{{ all_tags|safe }}'>
                    <input type="text" id="tender-hashtags-input" placeholder="Start typing tag..." autocomplete="off" class="hashtags-input-field">
                </div>
                <div id="tender-hashtags-dropdown" class="hashtag-dropdown-menu"></div>
            </div>
            
            <input type="hidden" name="hashtags" id="tender-hashtags-hidden">
            
            <div class="form-group">
                <label for="tender-documents">Documents</label>
                <input type="url" id="tender-documents" name="documents" placeholder="Enter document link">
            </div>
            
            <div class="form-group">
                <label for="tender-performers">Performer(s)</label>
                <div class="performers-input-group">
                    <input type="text" id="tender-performers" name="performers" placeholder="Add performer" autocomplete="off">
                    <div class="performers-dropdown" id="tender-performers-dropdown">
                        <div class="dropdown-item need-performer">Need a performer</div>
                    </div>
                </div>
                <div class="performers-list" id="tender-performers-list"></div>
            </div>
            
            <div class="form-group">
                <label for="tender-status">Add status</label>
                <select id="tender-status" name="status">
                    <option value="">-- Select status --</option>
                    {% for status in statuses %}
                    <option value="{{ status.id }}">{{ status.name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="tender-project-included">Project (task) included</label>
                <select id="tender-project-included" name="project-included">
                    <option value="">Empty</option>
                    {% for task in tasks %}
                    <option value="{{ task.id }}">{{ task.title }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-actions">
                <button type="button" class="btn btn-secondary save-btn">Save</button>
            </div>
        </form>
    </div>
</div>

<!-- Project Form -->
<div id="project-form" class="modal-overlay" style="display: none;">
    <div class="modal-form">
        <div class="modal-header-actions">
            <h2>Create Project</h2>
            <button class="modal_close_btn">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                </svg>
            </button>
        </div>

        <form class="project-form" id="project-form" method="post" enctype="multipart/form-data" action="{% url 'services_and_projects:submit_form' %}">
            {% csrf_token %}
            <input type="hidden" name="type_of_view" value="project"> <!-- Project -->
            
            <div class="form-group">
                <label for="project-title">Title</label>
                <input type="text" id="project-title" name="title" required>
            </div>
            
            <div class="form-group">
                <label for="project-description">Description</label>
                <textarea id="project-description" name="description" rows="4" required></textarea>
            </div>
            
            <div class="form-group">
                <label for="project-photos">Photos - drop file</label>
                <div class="file-upload-area">
                    <input type="file" id="project-photos" name="photos" multiple accept="image/*">
                    <div class="drop-zone">
                        <p>Drop files here or click to upload</p>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label for="project-category">Category</label>
                <select id="project-category" name="category" required>
                    <option value="">-- Select category --</option>
                    {% for cat in categories %}
                    <option value="{{ cat.id }}">{{ cat.category_name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="project-service">Service</label>
                <select id="project-service" name="service" required>
                    <option value="">-- Select service --</option>
                    {% for serv in services %}
                    <option value="{{ serv.id }}" data-category="{{ serv.category_name.id }}">{{ serv.service_name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="project-hashtags">Hashtags: <a href="#">Don't find hashtag?</a></label>
                <div id="project-hashtags-container" class="form-control hashtag-chip-container" tabindex="0" data-all-tags='{{ all_tags|safe }}'>
                    <input type="text" id="project-hashtags-input" placeholder="Start typing tag..." autocomplete="off" class="hashtags-input-field">
                </div>
                <div id="project-hashtags-dropdown" class="hashtag-dropdown-menu"></div>
            </div>
            
            <input type="hidden" name="hashtags" id="project-hashtags-hidden">
            
            <div class="form-group">
                <label for="project-documents">Documents</label>
                <input type="url" id="project-documents" name="documents" placeholder="Enter document link">
            </div>
            
            <div class="form-group">
                <label for="project-performers">Performer(s)</label>
                <div class="performers-input-group">
                    <input type="text" id="project-performers" name="performers" placeholder="Add performer" autocomplete="off">
                    <div class="performers-dropdown" id="project-performers-dropdown">
                        <div class="dropdown-item need-performer">Need a performer</div>
                    </div>
                </div>
                <div class="performers-list" id="project-performers-list"></div>
            </div>
            
            <div class="form-group">
                <label for="project-status">Add status</label>
                <select id="project-status" name="status">
                    <option value="">-- Select status --</option>
                    {% for status in statuses %}
                    <option value="{{ status.id }}">{{ status.name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="project-project-included">Project (task) included</label>
                <select id="project-project-included" name="project-included">
                    <option value="">Empty</option>
                    {% for task in tasks %}
                    <option value="{{ task.id }}">{{ task.title }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-actions">
                <button type="button" class="btn btn-secondary save-btn">Save</button>
            </div>
        </form>
    </div>
</div>

<!-- CSS для time-slot формы -->
<link rel="stylesheet" href="{% static 'css/timeslot_form.css' %}">
<link rel="stylesheet" href="{% static 'css/timeslot_feed.css' %}">

<!-- Alertify Library -->
<script src="{% static 'js/lib_alertify/alertify.min.js' %}"></script>
<script src="{% static 'js/lib_alertify/alertify_integra.js' %}"></script>

<script src="{% static 'js/form_for_all_task.js' %}"></script>
<script src="{% static 'js/timeslot_form.js' %}"></script>
<script src="{% static 'js/timeslot_feed.js' %}"></script>