{% load static %}

<div class="social_feed">
    <div class="social_feed_user_name">
        <div class="social_feed_user_name_image">
            {% if advertising.owner and advertising.owner.avatar %}
                <img src="{{ advertising.owner.avatar.url }}" alt="User Avatar" style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover;">
            {% else %}
                <div style="width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; font-size: 32px;">
                    {{ advertising.owner.get_default_avatar_emoji|default:"ðŸ‘¤" }}
                </div>
            {% endif %}
            <div class="social_feed_user_text_name">
                {% if advertising.owner %}
                    {{ advertising.owner.get_full_name|default:advertising.owner.username }}
                {% else %}
                    Anonymous User
                {% endif %}
            </div>
        </div>
        <div class="social_feed_menu"></div>
    </div>
    <div class="post_info">
        <span class="post_id">{{ advertising.id }}</span>
        <span class="post_date">{{ advertising.creation_date|date:'d.m.Y' }}</span>
    </div>
    <div class="social_feed_text">
        {% if advertising.description|length > 238 %}
            <p data-full-text="{{ advertising.description }}">{{ advertising.description|slice:":238" }}...</p>
            <div class="read_more">Read more...</div>
        {% else %}
            <p>{{ advertising.description }}</p>
        {% endif %}
    </div>
    <div class="social_feed_image_gallery_1">
        {% for photo in advertising.photos.all %}
            <a href="{{ photo.photo.url }}" 
               data-pswp-width="{{ photo.photo.width|default:1200 }}" 
               data-pswp-height="{{ photo.photo.height|default:800 }}"
               data-pswp-src="{{ photo.photo.url }}">
                <img src="{{ photo.photo.url }}" 
                     alt="Image {{ forloop.counter }}"
                     loading="lazy"
                     style="object-fit: cover; width: 100%; height: 100%;">
            </a>
        {% endfor %}
    </div>
    <div class="social_feed_tags">
        <span>
            {% for tag in advertising.hashtags.all %}
                {{ tag.tag }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </span>
    </div>
    <div class="post_actions">
        <div class="action_buttons">
            <button class="action_btn">Chat</button>
            <button class="action_btn">Comments</button>
        </div>
        <button class="order_now">Order now</button>
    </div>
</div> 