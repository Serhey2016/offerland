{% load static %}

<!-- Popup форма для публикации -->
{% if advertising %}
<!-- Форма для Advertising -->
<div class="publish_form_popup" id="publish_form_popup_{{ advertising.id }}">
    <div class="publish_form_overlay"></div>
    <div class="publish_form_container">
        <div class="publish_form_header">
            <h3>Publish #{{ advertising.id }}</h3>
            <button class="publish_form_close" id="publish_form_close_{{ advertising.id }}" type="button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
            </button>
        </div>
        
        <form class="publish_form" id="publish_form_{{ advertising.id }}">
            {% csrf_token %}
            <input type="hidden" name="advertising_id" value="{{ advertising.id }}">
            
            <div class="form_group">
                <label for="publish_title_{{ advertising.id }}">Title *</label>
                <input type="text" 
                       id="publish_title_{{ advertising.id }}" 
                       name="title" 
                       value="{{ advertising.title|default:'' }}" 
                       required 
                       placeholder="Enter advertising title">
            </div>
            
            <div class="form_group">
                <label for="publish_description_{{ advertising.id }}">Description *</label>
                <textarea id="publish_description_{{ advertising.id }}" 
                          name="description" 
                          required 
                          placeholder="Enter advertising description"
                          rows="4">{{ advertising.description|default:'' }}</textarea>
            </div>
            
            <div class="form_row">
                <div class="form_group">
                    <label for="publish_category_{{ advertising.id }}">Category *</label>
                    <select id="publish_category_{{ advertising.id }}" name="category" required>
                        <option value="">Select category</option>
                        <option value="services" {% if advertising.category == 'services' %}selected{% endif %}>Services</option>
                        <option value="products" {% if advertising.category == 'products' %}selected{% endif %}>Products</option>
                        <option value="events" {% if advertising.category == 'events' %}selected{% endif %}>Events</option>
                        <option value="other" {% if advertising.category == 'other' %}selected{% endif %}>Other</option>
                    </select>
                </div>
                
                <div class="form_group">
                    <label for="publish_priority_{{ advertising.id }}">Priority</label>
                    <select id="publish_priority_{{ advertising.id }}" name="priority">
                        <option value="normal" {% if advertising.priority == 'normal' %}selected{% endif %}>Normal</option>
                        <option value="high" {% if advertising.priority == 'high' %}selected{% endif %}>High</option>
                        <option value="urgent" {% if advertising.priority == 'urgent' %}selected{% endif %}>Urgent</option>
                    </select>
                </div>
            </div>
            
            <div class="form_row">
                <div class="form_group">
                    <label for="publish_budget_{{ advertising.id }}">Budget</label>
                    <input type="number" 
                           id="publish_budget_{{ advertising.id }}" 
                           name="budget" 
                           value="{{ advertising.budget|default:'' }}" 
                           placeholder="Enter budget amount"
                           min="0" 
                           step="0.01">
                </div>
                
                <div class="form_group">
                    <label for="publish_deadline_{{ advertising.id }}">Deadline</label>
                    <input type="date" 
                           id="publish_deadline_{{ advertising.id }}" 
                           name="deadline" 
                           value="{{ advertising.deadline|date:'Y-m-d'|default:'' }}">
                </div>
            </div>
            
            <div class="form_group">
                <label for="publish_tags_{{ advertising.id }}">Tags</label>
                <input type="text" 
                       id="publish_tags_{{ advertising.id }}" 
                       name="tags" 
                       value="{% for tag in advertising.hashtags.all %}{{ tag.tag }}{% if not forloop.last %}, {% endif %}{% endfor %}" 
                       placeholder="Enter tags separated by commas">
            </div>
            
            <div class="form_group">
                <label for="publish_notes_{{ advertising.id }}">Additional Notes</label>
                <textarea id="publish_notes_{{ advertising.id }}" 
                          name="notes" 
                          placeholder="Any additional information or requirements"
                          rows="3">{{ advertising.notes|default:'' }}</textarea>
            </div>
            
            <div class="form_actions">
                <button type="button" class="btn_secondary" id="publish_form_cancel_{{ advertising.id }}">
                    Cancel
                </button>
                <button type="submit" class="btn_primary">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    Publish
                </button>
            </div>
        </form>
    </div>
</div>
{% elif task %}
<!-- Форма для Task -->
<div class="publish_form_popup" id="publish_form_popup_{{ task.id }}">
    <div class="publish_form_overlay"></div>
    <div class="publish_form_container">
        <div class="publish_form_header">
            <h3>Publish #{{ task.id }}</h3>
            <button class="publish_form_close" id="publish_form_close_{{ task.id }}" type="button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
            </button>
        </div>
        
        <form class="publish_form" id="publish_form_{{ task.id }}">
            {% csrf_token %}
            <input type="hidden" name="task_id" value="{{ task.id }}">
            
            <div class="form_group">
                <label for="publish_title_{{ task.id }}">Title *</label>
                <input type="text" 
                       id="publish_title_{{ task.id }}" 
                       name="title" 
                       value="{{ task.title|default:'' }}" 
                       required 
                       placeholder="Enter task title">
            </div>
            
            <div class="form_group">
                <label for="publish_description_{{ task.id }}">Description *</label>
                <textarea id="publish_description_{{ task.id }}" 
                          name="description" 
                          required 
                          placeholder="Enter task description"
                          rows="4">{{ task.description|default:'' }}</textarea>
            </div>
            
            <div class="form_row">
                <div class="form_group">
                    <label for="publish_category_{{ task.id }}">Category *</label>
                    <select id="publish_category_{{ task.id }}" name="category" required>
                        <option value="">Select category</option>
                        <option value="development" {% if task.type_of_task.type_of_task_name == 'development' %}selected{% endif %}>Development</option>
                        <option value="design" {% if task.type_of_task.type_of_task_name == 'design' %}selected{% endif %}>Design</option>
                        <option value="marketing" {% if task.type_of_task.type_of_task_name == 'marketing' %}selected{% endif %}>Marketing</option>
                        <option value="consulting" {% if task.type_of_task.type_of_task_name == 'consulting' %}selected{% endif %}>Consulting</option>
                        <option value="other" selected>Other</option>
                    </select>
                </div>
                
                <div class="form_group">
                    <label for="publish_priority_{{ task.id }}">Priority</label>
                    <select id="publish_priority_{{ task.id }}" name="priority">
                        <option value="normal" {% if task.priority == 'normal' %}selected{% endif %}>Normal</option>
                        <option value="high" {% if task.priority == 'high' %}selected{% endif %}>High</option>
                        <option value="urgent" {% if task.priority == 'urgent' %}selected{% endif %}>Urgent</option>
                    </select>
                </div>
            </div>
            
            <div class="form_row">
                <div class="form_group">
                    <label for="publish_budget_{{ task.id }}">Budget</label>
                    <input type="number" 
                           id="publish_budget_{{ task.id }}" 
                           name="budget" 
                           value="{{ task.budget|default:'' }}" 
                           placeholder="Enter budget amount"
                           min="0" 
                           step="0.01">
                </div>
                
                <div class="form_group">
                    <label for="publish_deadline_{{ task.id }}">Deadline</label>
                    <input type="date" 
                           id="publish_deadline_{{ task.id }}" 
                           name="deadline" 
                           value="{{ task.date_end|date:'Y-m-d'|default:'' }}">
                </div>
            </div>
            
            <div class="form_group">
                <label for="publish_tags_{{ task.id }}">Tags</label>
                <input type="text" 
                       id="publish_tags_{{ task.id }}" 
                       name="tags" 
                       value="{% for tag in task.hashtags.all %}{{ tag.tag }}{% if not forloop.last %}, {% endif %}{% endfor %}" 
                       placeholder="Enter tags separated by commas">
            </div>
            
            <div class="form_group">
                <label for="publish_notes_{{ task.id }}">Additional Notes</label>
                <textarea id="publish_notes_{{ task.id }}" 
                          name="notes" 
                          placeholder="Any additional information or requirements"
                          rows="3">{{ task.note|default:'' }}</textarea>
            </div>
            
            <div class="form_actions">
                <button type="button" class="btn_secondary" id="publish_form_cancel_{{ task.id }}">
                    Cancel
                </button>
                <button type="submit" class="btn_primary">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    Publish
                </button>
            </div>
        </form>
    </div>
</div>
{% endif %}
